# Part 1. Установка ОС #
Установил Ubuntu 24.04 Server LTS.
* Чтобы проверить версию системы воспользуемся командой `cat /etc/issue`

![1_1](../src/Screenshot/1_1.png) 

# Part 2. Создание нового пользователя #
* Чтобы создать еще одного пользователя (dima) воспользуемся командой `sudo useradd dima`
* Чтобы добавить его в группу adm воспользуемся командой `sudo usermod -a -G adm dima`
* Чтобы проверить всех пользоваетелей восползуемся командой `cat /etc/passwd`

![2_1](../src/Screenshot/2_1.png) 

# Part 3. Настройка сети ОС #

## Задаем название машины ##

* Чтобы задать название машине воспользуемся командой `sudo nano /etc/hostname` и заменим `serveru` на `user-1` 
* Чтобы изменения вступили в силу воспользуемся командой `sudo reboot`

![3_1](../src/Screenshot/3_1.png) 

## Установка временной зоны, соответствующая текущему местоположению ##
 
* Чтобы установить временную зону, соответствующую вашему текущему местоположению, нужно сначала воспользоваться командой `timedateclt list-timezones`, с помощью которой мы выбрем временную зону

![3_2](../src/Screenshot/3_2.png) 

* Теперь установим временную зону воспользовавшись командой `sudo timedatectl set-timezone Europe/Moscow`
* И посмотрим результат работы с помощью `timedatectl`

![3_3](../src/Screenshot/3_3.png) 

## Вывод названий сетевых интерфейсов с помощью консольной команды ##

* Чтобы вывести названия всех сетевых интерфейсов воспользуемся командой `ip link show`

![3_4](../src/Screenshot/3_4.png) 

Давайте дадим объяснение интерфейсу lo.  
Это виртуальный интерфейс (существует на уровне операционной системы), который используется для запуска и отладки сетевых программ и серверных приложений на локальной машине

## Получение ip адрес-а устройства от DHCP сервера ##

Чтобы получить ip адрес от DHCP сервера, нужно сперва установить DHCP на вашу систему
Для эсдуфтого введем следущий набор команд:  
1. Обновим пакетный менеджер командой `sudo apt-get update`
2. установим dhcp сервер командой  `sudo apt install isc-dhcp-server -y`  
3. чтобы получить ip от DHCP сервера воспользуемся командодй `sudo dhclient -v`   

![3_5](../src/Screenshot/3_5.png) 

`DHCP - Dynamic Host Configuration Protocol. Нужен для того, чтобы автоматически выдавать динамические ip адреса устройствам в сети.`

## Вывод внешнего IP-адреса шлюза и внутреннего IP-адреса шлюза ##

* Чтобы узнать внутренний IP-адрес (который нужен для того, чтобы программы могли взаимодействовать в рамках одного компьютера, используя сетевые протоколы), воспользуемся командой `ping localhost`   

![3_6](../src/Screenshot/3_6.png) 

* Чтобы узнать внешний IP-адрес (который нужен для выхода в глобальную сеть, бывает статическим и динамическим), воспользуемся командой `curl ifconfig.me`

![3_7](../src/Screenshot/3_7.png) 

## Назначение статичных настроек ip, gw, dns ##

* Чтобы вручную задать ip, gw, dns воспользуемся командой `sudo nano /etc/netplan/00-installer-config.yaml` и установим необходимые значения

![3_8](../src/Screenshot/3_8.png) 

* Чтобы изменения вступили в силу, воспользуемся командой `sudo netplan apply`  

* После необходимо проверить, что настройки сети сохранились:
1. Воспользуемся командой `sudo reboot`, чтобы перезагрузить систему
2. Чтобы проверить сохранились ли наши настройки, воспользуемся командами: 
    * `ip a`
    * `resolvectl dns`
    * `ip route | grep default`

3. Теперь проверим удаленные хосты 1.1.1.1, 8.8.8.8 и ya.ru:

![3_9](../src/Screenshot/3_9.png) 

# Part 4. Обновление ОС #

* Обновим пакеты командой `sudo apt-get update`  

![4_1](../src/Screenshot/4_1.png) 

* Введем эту команду повторно, чтобы проверить. 

![4_2](../src/Screenshot/4_2.png) 

# Part 5. Использование команды sudo #
`sudo — это утилита, предоставляющая привилегии суперпользователя (root - он же суперпользователь который имеет право на выполнение всех операций) для выполнения административных операций в соответствии со своими настройками. Утилита позволяет легко контролировать доступ к важным приложениям в системе.`

* Чтобы дать права sudo пользователю dima воспользуемся командой `sudo usermod -aG sudo dima` и проверим, что dima получил права sudo, командой `id dima`

![5_1](../src/Screenshot/5_1.png) 

* Чтобы поменять пользователя, воспользуемся командой `su dima`
    * Используем команду `sudo nano /etc/hostname` и меняем значение user-1 -> user-2
    * Чтобы изменения вступили, перезагрузим систему командой `sudo reboot`

![5_2](../src/Screenshot/5_2.png) 

# Part 6. Установка и настройка службы времени #

* Чтобы вывести текущее время, воспользуемся командой `timedatectl`
* Проверим синхронизацию времени командой `timedatectl show`

![6_1](../src/Screenshot/6_1.png) 

# Part 7. Установка и использование текстовых редакторов #

* Чтобы установить текстовые редакторы воспользуемся командой `sudo apt-get install vim nano joe`

## Nano ##

1. Чтобы создать текстовый файл воспользуемся командой `nano test_nano.txt`
    * В открывшемся редакторе `nano` напишем свой ник - `navigatc` 
    * Чтобы сохранить изменения воспользуемся сочетанием клавиш `CTRL + S`
    * Чтобы закрыть файл воспользуемся сочетанием клавиш `CTRL + X`

![7_1](../src/Screenshot/7_1.png) 

2. Открываем имеющийся текстовый файл командой `nano test_nano.txt`
    * Заменяем никнейм на `21 School 21`
    * Закрываем файл сочетанием клавиш `CTRL + X`

![7_2](../src/Screenshot/7_2.png) 

3. Открываем имеющийся текстовый файл командой `nano test_nano.txt`
    * Чтобы осуществить поиск без изменения, воспользуемся сочетанием клавиш `CTRL + W`, в открывшейся строке записываем строку, которую хотим найти, нажимаем клавишу `ENTER`
    * Чтобы осуществить посик с заменой, воспользуемся сочетанием клавиш `ALT + R`, в открывшейся строке записываем строку, которую хотим заменить, после в новой открывшейся строке записываем строку, на которую хотим заменить
    * Чтобы сохранить изменения воспользуемся сочетанием клавиш `CTRL + S`
    * Чтобы закрыть файл воспользуемся сочетанием клавиш `CTRL + X`

![7_3](../src/Screenshot/7_3.png) 

## VIM ##

1. Чтобы создать текстовый файл воспользуемся командой `vim test_vim.txt`
    * В открывшемся редакторе `vim` напишем свой ник - `navigatc` 
    * Чтобы сохранить изменения воспользуемся клавишей `ESC`, и в командной строке напишем `:wq`

![7_4](../src/Screenshot/7_4.png) 

2. Открываем имеющийся текстовый файл командой `vim test_vim.txt`
    * Заменяем никнейм на `21 School 21`
    * В командной строке прописываем `:q!`

![7_5](../src/Screenshot/7_5.png) 

3. Открываем имеющийся текстовый файл командой `vim test_vim.txt`
    * Чтобы осуществить поиск без изменений, переходим в командный режим, а дальше вписываем в командую строку `/nav` 
    * Чтобы осуществить поиск с изменениями, переходим в командный режим, а дальше вписываем в командную строку `:s/crock/guy`
    * Чтобы сохранить изменения воспользуемся клавишей `ESC`, и в командной строке напишем `:wq`

![7_6](../src/Screenshot/7_6.png) 

## JOE ##

1. Чтобы создать текстовый файл воспользуемся командой `joe test_joe.txt`
    * В открывшемся редакторе `joe` напишем свой ник - `navigatc` 
    * Выходим с сохранением изменений с помощью сочетания клавиш `CTRL + K`, а после `CTRL + X`

![7_7](../src/Screenshot/7_7.png) 

2. Открываем имеющийся текстовый файл командой `joe test_joe.txt`
    * Заменяем никнейм на `21 School 21`
    * Выходим без сохранения изменений с помощью сочетания клавиш `CTRL + C`, а после нажимаем клавишу `Y`

![7_8](../src/Screenshot/7_8.png) 

3. Открываем имеющийся текстовый файл командой `joe test_joe.txt`
    * Чтобы осуществить поиск без замены, воспользуемся сочетанием клавиш `CTRL + K + F`, и в предложенной строке нажмем на клаву `I`
    * Чтобы осуществить поиск с заменой, воспользуемся сочением клавиш `CTRL + K + F`, и в предложенно окне нажмем на клавишу `R`
    * Выходим с сохранением изменений с помощью сочетания клавиш `CTRL + K`, а после `CTRL + X`

![7_9](../src/Screenshot/7_9.png) 

# Part 8. Установка и базовая настройка сервиса SSHD #

Чтобы установить службу `SSHD` воспользуемся командами:
- `sudo apt-get install ssh`  
- `sudo apt install openssh-server`
* Чтобы добавить автостарт службы в автозагрузку системы воспользуемся командой `sudo systemctl enable ssh.service`
* Чтобы перенастроить службу `SSHD` на порт 2022 воспользуемся командой `sudo nano etc/ssh/sshd_config`

![8_1](../src/Screenshot/8_1.png) 

* Теперь проверим, что служба находится в автозагрузке системы, для этого воспользуемся командой `ps aux | grep sshd`

![8_2](../src/Screenshot/8_2.png) 

#### Команда ps с флагами: ####
* `-С`- отобразит информацию планировщика
* `-f`- выведет максимум доступных данных
* `-F`- аналогично -f, только выводит ещё больше данных
* `-l`- длинный формат вывода
* `-j,`- (j) выводит процессы в стиле Jobs, минимум информации
* `-M,`- (Z) выведет информацию о безопасности
* `-o,`- (o) определяем свой формат вывода
* `--sort, (k)`- сортируем по указанной колонке
* `-L, (H)`- отобразим потоки процессов в колонках LWP и NLWP
* `-m, (m)`- выввод потоки после процесса
* `-V, (V)`- вывод информацию о версии
* `-H`- вывод дерево процессов
#### ####

* Перезагружаем систему командой `sudo reboot`
* После введем команду `netstat -tan`

![8_3](../src/Screenshot/8_3.png) 

#### Что такое netstat ? #### 
* Это утилита, которая позволяет выводить на экран состояние TCP соединений, число сетевых интерфейсов и сетевую статистику по протоколам
* Полезна тем, что с помощью нее можно находить и устранять проблемы в сетевых соединениях и мониторить их производительность  
    * `-t - отобразить только активные TCP-соединения`  
    * `-a - отобразить список прослушивающих и непрослушивающих сокетов`  
    * `-n - вывод будет осуществляться в символической форме.`  

#### ####

- `Proto` - Протокол (`tcp`, `udp`, `raw`),используемый сокетом.  
- `Recv-Q` - Счётчик байт не скопированных программой пользователя из этого сокета.  
- `Send-Q` - Счётчик байтов, не подтверждённых удалённым узлом.  
- `Local Address` - Адрес и номер порта локального конца сокета. Если не указана опция `--numeric (-n)`, адрес сокета преобразуется в каноническое имя узла (`FQDN`), и номер порта преобразуется в соответствующее имя службы.
- `Local Address 0.0.0.0` - означает прослушивание на всех устройствах.
- `Foreign Address` - Адрес и номер порта удалённого конца сокета. Аналогично "`Local Address.`"
- `Foreign Address 0.0.0.0` - это означает, что никто не подключился
- `State` - Состояние сокета. Поскольку в режиме raw нет состояний, а в режиме UDP состояния обычно не испольуются, эта колонка может оставаться пустой.
- `LISTEN` - Сокет ожидает входящих подключений. Такие сокеты не включаются в вывод, пока вы не укажете опцию `-a`
- `TCP` — это протокол управления передачей (`Transmission Control Protocol`). Его задача — управлять отправкой данных и следить за тем, чтобы они были гарантированно приняты получателем. Именно гарантия получения данных и сделала этот протокол таким востребованным.


# Part 9. Установка и использование утилит top, htop #

* Запускаем утилиту `top`, если утилита не установлена воспользуемся командой `sudo apt istall top`

#### ####

* `Uptime` = 2 - время непрерывной работы   
* `User` = 1 - количество авторизованных пользователей  
* `Load average` - общая загрузка системы.  
    * 0.10 - средняя нагрузка в течение 1 минуты   
    * 0.14 - средняя нагрузка в течение 5 минут  
    * 0.07 - средняя нагрузка в течении 15 минут  
* `Tasks` = 131 - общее число процессов   
* `%CPU(s)` - загрузка CPU 
    * 0.0 - пользователями  
    * 0.0 - системой   
* `MiB Mem` - память   
    * 3915.8 total - используется  
    * 3371.2 free -  свободная   
* `PID` = 1 - занимает больше всего памяти (столбец  %MEM)  
* `PID` = 1 - занимает больше всего процессорного времене (столбец TIME+)

![9_1](../src/Screenshot/9_1.png) 

* Устанавливаем и запускаем утилиту `htop`, сортируем по `PID`

![9_2](../src/Screenshot/9_2.png) 

* Сортируем по `PERCENT_CPU`

![9_3](../src/Screenshot/9_3.png) 

* Сортируем по `PERCENT_MEM`

![9_4](../src/Screenshot/9_4.png) 

* Сортируем по `TIME`

![9_5](../src/Screenshot/9_5.png) 

* Отфильтровавал по процессу `SSHD`

![9_6](../src/Screenshot/9_6.png) 

* Нашёл процессы с `syslog`

![9_7](../src/Screenshot/9_7.png) 

* Вывел процессы с добавлением `hostname`, `clock` и `uptime`

![9_8](../src/Screenshot/9_8.png) 

# Part 10. Использование утилиты fdisk #

Запускаем команду `fdisk -l`

#### ####

Команда `fdisk -l` вывела информацию о доступных мне дисках и разделах на них 

#### Описание диска: ####
- `Название жесткого диска` = /dev/sda
- `Размер жесткого диска` = 10 GiB
- `Количество секторов на диске` = 20971520
- `Размер swap` = отсутствует

![10_1](../src/Screenshot/10_1.png) 

# Part 11. Использование утилиты df #

*Запускаем команду `df`
* `Размер раздела` - 8408452
* `Размер занятого пространства` - 2428940
* `Размер свободного пространства` - 5530796
* `Процент использования` - 31

![11_1](../src/Screenshot/11_1.png) 

Запускаем команду `df -Th`
* `Размер раздела` - 8.1
* `Размер занятого` - 2.4
* `Размер свободного` - 5.3
* `Процент использования` - 31

![11_2](../src/Screenshot/11_2.png) 

# Part 12. Использование утилиты du #
Запускаем команду `du`

* Вывел размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)

![12_1](../src/Screenshot/12_1.png) 
####
![12_2](../src/Screenshot/12_2.png) 
####
![12_3](../src/Screenshot/12_3.png) 

* Вывел размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

![12_4](../src/Screenshot/12_4.png) 

# Part 13. Установка и использование утилиты ncdu #

Чтобы установить утилиту, воспользуемся командой `sudo apt-get install ncdu`  

* Вывел размер папки `/home `

![13_1](../src/Screenshot/13_1.png) 

* Вывел размер папки `/var`

![13_2](../src/Screenshot/13_2.png) 

* Вывел размер папки `/var/log`

![13_3](../src/Screenshot/13_3.png) 

# Part 14. Работа с системными журналами #

Открываем папку `log` и смотрим файлы: `dmesg`, `syslog`, `auth.log`

* Время последней успешной авторизации - 03:33:17
* Имя пользователя - navigatc
* Метод входа в систему - login

Перезапустил службу `SSHD` (с помошью команды `sudo systemctl restart sshd.service`) и просмотрел сообщение в логах о рестарте службы (`cat ../../var/log/syslog`)

![14_1](../src/Screenshot/14_1.png) 

# Part 15. Использование планировщика заданий CRON #

* Чтобы установить синхронизацию времени каждые 2 минуты, воспользуемся командой `crontab -e`

![15_1](../src/Screenshot/15_1.png) 

* Смотрим работу cron с помощью команды `tail /var/log/syslog` и видим, что через 2 минуты запустилась синхронизация времени

![15_2](../src/Screenshot/15_2.png) 

* Выведем список текущих задач cron командой `crontab -l`  

![15_3](../src/Screenshot/15_3.png) 

* И последнее, удалим все задачи из планировщика cron командой `crontab -r` и проверим, что в нем больше нет записей командой `crontab -l`  

![15_4](../src/Screenshot/15_4.png) 

# The end! #